<!--
 * @Description  :
 * @Version      : 1.0
 * @Author       : Mickey
 * @Date         : 2022-08-17 11:07:52
 * @LastEditors  : Mickey
 * @LastEditTime : 2022-08-18 10:11:21
 * @FilePath     : \\undefinedc:\\Users\\Thinkpad\\Desktop\\新建文本文档 (16).html
 * Copyright (C) 2022 Mickey. All rights reserved.
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style lang="'scss">
        #container {
            display: grid;
            align-items: center;
            grid: auto / repeat(4, 1fr);
            grid-gap: 20px;
            justify-content: space-between;
        }
        
        #container .box {
            display: grid;
            align-items: center;
            grid: auto / repeat(1fr, 3);
            justify-content: space-between;
        }
        
        #btn_box {
            text-align: center;
            margin: auto;
        }
        
        #total {
            color: #fff;
            font-size: 48px;
            text-align: center;
            margin: auto;
            margin-top: 60px;
            background-color: #999;
        }
        
        .total_box {
            display: -webkit-box;
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
            align-items: center;
        }
        
        .name {
            margin-bottom: 10px;
            margin-top: 20px;
        }
        
        .num {
            margin-bottom: 10px;
        }
        
        .inpt {
            border: 1px solid #999;
            font-size: 16px;
            color: #333;
        }
        
        .btn {
            margin-top: 50px;
            background-color: #f9ab84;
            border: 0;
            outline: 0;
            border-radius: 5px;
            padding: 12px 60px;
            color: #fff;
            cursor: pointer;
        }
        
        .money-default {
            color: #fff
        }
        
        .money-gold {
            color: #f4b757
        }
        
        .money-green {
            color: #5eff5e
        }
        
        .money-blue {
            color: #5fffff
        }
        
        .money-yellow {
            color: #fffc49;
            text-shadow: 0 0 1px #000
        }
        
        .money-purple {
            color: #FF00FF;
        }
        
        .money-light_green {
            color: #99FF00;
        }
        
        .money-deep_blue {
            color: #959cf6;
        }
        
        .money-pink {
            color: #FF00CC;
        }
    </style>
</head>

<body>
    <div id="container"></div>

    <!-- <div id="btn_box"><button class="btn">计算</button></div> -->
    <div id="total"></div>
    <script>
        const color = [
            "#fff",
            "#99FF00",
            "#FF00FF",
            "#fffc49",
            "#85ffff",
            "#81ff78",
            "#ffd877",
            "#0099CC",
        ];

        let selectColor = color[0];
        const arr = [{
            name: "八荒",
            value: 135 / 2,
            num: 2,
            price: 7481744,
        }, {
            name: "灵珠",
            value: 3,
            num: 80,
            price: 562000,
        }, {
            name: "高残",
            value: 28,
            num: 10,
            price: 502872,
        }, {
            name: "神兽丹",
            value: 125,
            num: 10,
            price: 230000,
        }, {
            name: "玄元丹",
            value: 4,
            num: 10,
            price: 0,
        }, {
            name: "荒玉",
            value: 2,
            num: 100,
            price: 0,
        }, {
            name: "帮贡",
            value: 4,
            num: 1,
            price: 0,
        }, {
            name: "召唤师驯养",
            value: 2,
            num: 50,
            price: 0,
        }, {
            name: "天运石",
            value: 3,
            num: 500,
            price: 0,
        }, {
            name: "成就",
            value: 2,
            num: 1,
            price: 0,
        }, {
            name: "净瓶",
            value: 3,
            num: 100,
            price: 260000,
        }, {
            name: "金柳露",
            value: 872,
            num: 1,
            price: 100000,
        }, {
            name: "高级属性卡集",
            value: 1,
            num: 300,
            price: 50000,
        }, {
            name: "龙之骨",
            value: 2,
            num: 1,
            price: 20000000,
        }, {
            name: "1级五行",
            value: 6,
            num: 1,
            price: 42000000,
        }, {
            name: "2级五行",
            value: 1,
            num: 1,
            price: 300000000,
        }, {
            name: "聚魄",
            value: 5,
            num: 1,
            price: 7000000,
        }, {
            name: "神兵",
            value: 5,
            num: 1,
            price: 10000000,
        }, {
            name: "终残",
            value: 6,
            num: 1,
            price: 8371285,
        }, {
            name: "高级",
            //-3
            value: 10,
            num: 1,
            price: 7500000,
        }, ];
        const container = document.querySelector("#container");
        let html_ = "";
        arr.map((item, index) => {
            html_ += `
			    <div class='box_${index}'>
			        <div class='name'>${item.name}(${item.num})</div>
			        <div class='price'>
			            <span>单价：</span>
			            <input class="inpt price_${index} inpt_${index}" type='number' value="${item.price}"/>
			        </div>
			        <div class='num'>
			            <span>数量：</span>
			            <input class="inpt value_${index} inpt_${index}" type='number' value="${item.value}"/>
			        </div>
			                 <div class='total_${index}'>
			                 </div>
			    </div>
			`;
        });
        container.innerHTML = html_;
        arr.map((item, index) => {
            const price_ = document.querySelector(`.price_${index}`);
            const value_ = document.querySelector(`.value_${index}`);
            const inpt_ = document.querySelector(`.inpt_${index}`);
            const box_ = document.querySelector(`.total_${index}`);
            let prc = price_.value * value_.value * item.num * 0.92;

            const div_ = `
			         <div class='total_box'>
			             <span>总额：</span>
			             <div class='tot${index}'>${Math.ceil(prc)}</div>
			         </div>
			     	`;
            box_.innerHTML = div_;
            //总额

            price_.oninput = function() {
                prc = price_.value * value_.value * item.num * 0.92;
                const div_ = `
			         <div class='total_box'>
			             <span>总额：</span>
			             <div class='tot${index}'>${Math.ceil(prc)}</div>
			         </div>
			     	`;
                box_.innerHTML = div_;
                //总额
                let totals = 0;
                arr.map((item, index) => {
                    const tot_ = document.querySelector(`.tot${index}`).innerText;
                    totals += Number(tot_);
                });

                let money = getMoneyClassName(totals);
                let d = `<div class='${money}' >${
						totals.toLocaleString ? totals.toLocaleString() : totals
					}</div>`;
                total.innerHTML = d;
            };

            value_.oninput = function() {
                prc = price_.value * value_.value * item.num * 0.92;
                const div_ = `
			         <div class='total_box'>
			             <span>总额：</span>
			             <div class='tot${index}'>${Math.ceil(prc)}</div>
			         </div>
			     	`;
                box_.innerHTML = div_;
                //总额
                let totals = 0;
                arr.map((item, index) => {
                    const tot_ = document.querySelector(`.tot${index}`).innerText;
                    totals += Number(tot_);
                });
                let money = getMoneyClassName(totals);
                let d = `<div class='${money}' >${
						totals.toLocaleString ? totals.toLocaleString() : totals
					}</div>`;
                total.innerHTML = d;
            };
        });

        const total = document.querySelector("#total");

        setTimeout(() => {}, 1000);
        let totals = 0;
        arr.map((item, index) => {
            const tot_ = document.querySelector(`.tot${index}`).innerText;
            totals += Number(tot_);
        });

        let money = getMoneyClassName(totals);
        let d = `<div class='${money}' >${
				totals.toLocaleString ? totals.toLocaleString() : totals
			}</div>`;
        total.innerHTML = d;

        function getMoneyClassName(t) {
            return (
                "money-" +
                (t >= 1e11 ?
                    "pink" :
                    t >= 1e10 ?
                    "deep_blue" :
                    t >= 1e9 ?
                    "gold" :
                    t >= 1e8 ?
                    "green" :
                    t >= 1e7 ?
                    "blue" :
                    t >= 1e6 ?
                    "yellow" :
                    t >= 1e5 ?
                    "purple" :
                    t >= 1e4 ?
                    "light_green" :
                    "default")
            );
        }
    </script>
</body>

</html>